{% extends 'base.html.twig' %}

{% block title %}Menu n° {{ menu.id }}{% endblock %}

{% block body %}
    <a class="p-3" href="{{ path('menu_index') }}">Retour à la liste des menus</a>
    <h4 class="text-center my-4">Menu du {{ menu.startedAt|date("d/m/Y") }} au {{ menu.finishedAt|date("d/m/Y") }}</h4>
    <div class="text-center my-3">
        <a class="btn btn-primary" href="{{ path('shoppingList', {'menu_id': menu.id}) }}">Générer la liste de courses</a>
    </div>
    <div class="d-flex flex-wrap justify-content-center">
    {% for nb_jours in constant('App\\Entity\\Menu::NB_MIN_DAY')..constant('App\\Entity\\Menu::NB_MAX_DAY') %}
        <div class="d-flex flex-column alert alert-primary mx-1">
            {% for shift in menu.shifts|slice( nb_jours * 2, constant('App\\Entity\\Menu::NB_SHIFT_PER_DAY'))  %}
                <div class="p-3 my-1 alert alert-light text-center">
                    {% if shift.recipes is not empty %}
                        <div class="font-weight-bold mb-2">{{ shift.identifier }}</div>
                        {% for recipe in shift.recipes %}
                            <a href="{{ path('recipe_show', {'id': recipe.id}) }}">{{ recipe.title }}</a>
                        {% endfor %}
                        <p class="mt-3">pour {{ shift.peopleCount }} personnes</p>
                    {% else %}
                        <div class="font-weight-bold">{{ shift.identifier }}</div>
                        <p>---</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    {% endfor %}
    </div>
{% endblock %}